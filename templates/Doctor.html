{% extends "material/base.html" %}
{% from "material/macro.html" import render_field %}
{% block content -%}

<!--SHOW A INFO ABOUT THE PATIENT-->
<div class="row">
  <div class="col xl3 m4 l3">
    <h4 class="header">Info: {{patientsData.FirstName}} {{patientsData.LastName}}</h4>
    <div class="card horizontal">
      <div class="card-stacked">
        <div class="card-content">
          {% for RecNum in patientsData.Emergincy %}
          <h5>Emergincy Record Number: <div name="EmReNu">{{RecNum}}</div>
          </h5>
          {% endfor %}
          <h5>BOD: {{patientsData.BOD}}</h5>
          <h5>Language: {{patientsData.language}}</h5>
        </div>
        <!--SHOW A INFO ABOUT THE DAY PATIENT HAVE IN EMERGENCY-->
        <div class="row">
          <h5 class="header">Recordby Days:</h5>
          {% if PatientId %}
          {% for Medical in patientsData.DoctorNote %}
          <br>
          <a class="dropdown-trigger btn" href="#" data-target="List">{{Medical.Date}}</a>
          <ul id="List" Class='dropdown-content'>
            <li><a href="#!">
                <h6>By doctor:</h6>
                <h6>{{Medical.Doctor.FirstName}} {{Medical.Doctor.LastName}}</h6>

              </a></li>
              <li><a href="#!">
                <h6>Prescription: {{Medical.Prescription[0]}}</h6>
              </a></li>
            <hr>
            <li><a href="#!">
                <h6>Referencia: {{Medical.Referencia[0]}}</h6>
              </a></li>
            <hr>
            <li><a href="#!">
                <h6>Note: {{Medical.Note}}</h6>
              </a></li>
            <hr>
            <li><a href="#!">
                <h6>Medication: {{Medical.Medication[0][0]}} {{Medical.Medication[1][0]}}</h6>
              </a></li>
            <hr>
            <li><a href="#!">
                <h6>Test: {{Medical.Test[0][0]}} {{Medical.Test[1][0]}}</h6>
              </a></li>
          </ul>
          {% endfor %}
          {% endif %}
        </div>

        <!--SHOW A INFO ABOUT THE DAY PATIENT HAVE IN EMERGENCY-->
        <div class="row ">
          <h5 class="header">Medical Treatment by day:</h5>
          {% if PatientId %}
          {% for Medical in PatientId.NurseNote %}
          <br>
          <a class="dropdown-trigger btn" href="#" data-target="List">{{Medical.MedicalDate}}</a>
          <ul id="List" Class='dropdown-content'>
            {% for Medical in Medical.Prescription %}
            <li><a href="#!">
                <h6>Prescription: {{Medical}}</h6>
              </a></li>
            {% endfor %}
            <hr>
            <li><a href="#!">
                {% for Medical in Medical.Referencia %}
                <h6>Referencia: {{Medical}}</h6>
                {% endfor %}
              </a></li>
            <hr>
            <li><a href="#!">
                <h6>Note: {{Medical.Note}}</h6>
              </a></li>
            <hr>
            <li><a href="#!">
                {% for Medical in Medical.Medication %}
                <h6>Medication: {{Medical}}</h6>
                {% endfor %}
              </a></li>
            <hr>
            <li><a href="#!">
                {% for Medical in Medical.Test %}
                <h6>Test: {{Medical}}</h6>
                {% endfor %}
              </a></li>
          </ul>
          {% endfor %}
          {% endif %}
        </div>
      </div>
    </div>
  </div>

  <div class="col xl9 m4 l8">
    <h2 class="header">Hi, {{DrPasientID.Category}}: {{DrPasientID.FirstName}} {{DrPasientID.LastName}}</h2>
    <div class="card horizontal">
      <div class="card-stacked">
        <div class="card-content">
          <form action="/Doctor/{{DrPasientID._id}}/{{patientsData._id}}" method="POST" class="col s12">
            <div class="row">
              <div class="input-field col s12 m6 l6">
                {{ render_field(form.Prescription, placeholder="Prescription", class="validate", id="Prescription") }}
              </div>

              <div class="input-field col s12 m6 l6">
                {{ render_field(form.Referencia, placeholder="Referencia", class="validate", id="Referencia") }}

              </div>
            </div>
            <div class="row">
              <div class="input-field col s12 m6 l6">
                {{ render_field(form.Note, placeholder="Note", class="validate", id="Note") }}
              </div>
            </div>
            <div class="row">
              <h5>Assign Medication</h5>
              <div class="input-field col s12 m6 l4">
                {{ render_field(form.assigMed, placeholder="Medication", class="validate", id="assigMed") }}
                <dd>
                  <div id="newfieldMed"></div>
                </dd>
              </div>
              <div class="input-field col s12 m6 l4">
                {{ render_field(form.Indications, placeholder="Indications", class="validate", id="Indications") }}
                <dd>
                  <div id="newfieldInd"></div>
                </dd>
              </div>
              <div class="input-field col s12 m6 l4">
                <div id="addFields" class="center btn waves-effect waves-light" onclick="addfield()">AddField</div>
                <div id="removeFields" class="center btn waves-effect waves-light"
                  onclick="RemuveField('readyFieldInd'); RemuveFields('readyFieldMed')">RemoveField</div>
              </div>
              <div id="fieldsMessages"></div>
            </div>

            <div class="row">
              <h5>Assign Test</h5>
              <div class="input-field col s12 m6 l4">
                {{ render_field(form.TestName, placeholder="Test Name", class="validate", id="TestName") }}
                <dd>
                  <div id="newFldTestName"></div>
                </dd>

              </div>
              <div class="input-field col s12 m6 l4">
                {{ render_field(form.DoBefore, type="date", class="validate", id="DoBefore") }}
                <dd>
                  <div id="newFldDoBefore"></div>
                </dd>
              </div>
              <div class="input-field col s12 m6 l4">
                <div id="addFields" class="center btn waves-effect waves-light" onclick="addfieldTest()">AddField
                </div>
                <div id="removeFields" class="center btn waves-effect waves-light"
                  onclick="RemuveFieldTest('readyFieldTest'); RemuveFieldsDoBe('readyFieldDoBe')">RemoveField</div>
              </div>
              <div id="fieldsMessagesTest"></div>
            </div>
            <div class="row">
              <button id="patButton" class="center btn waves-effect waves-light" type="submit" name="action"
                value=Register>Submit</button>
            </div>
        </div>
      </div>
      </form>
    </div>
    <div class="card-action">
      <a href="#">This is a link</a>
    </div>
  </div>
</div>
</div>
</div>













{%- endblock content %}

